
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pip49 ê°œì¸ ì„œë²„ ì•ˆë‚´</title>
    <style>
        :root { --primary-color: #3498db; --bg-overlay: rgba(255, 255, 255, 0.9); }
        body {
            margin: 0; font-family: 'Pretendard', sans-serif;
            background: url('https://pip49.github.io/intro/bg.jpg') no-repeat center center fixed;
            background-size: cover; color: #333; display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }
        .main-card {
            background: var(--bg-overlay); width: 90%; max-width: 500px; padding: 30px;
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
        }
        .status-badge { background: #3498db; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; margin-bottom: 10px; display: inline-block; }
        .gallery { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0; }
        .gallery img { width: 100%; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .audio-player { background: #eee; padding: 15px; border-radius: 10px; margin-top: 15px; }
        audio { width: 100%; }
        .timer-display { color: #e74c3c; font-weight: bold; font-size: 1.2rem; margin: 15px 0; display: none; } /* ê¸°ë³¸ì€ ìˆ¨ê¹€ */
        .btn-retry { margin-top: 10px; padding: 12px 25px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="main-card">
    <span id="badge" class="status-badge">ì„œë²„ ìƒíƒœ í™•ì¸ ì¤‘...</span>
    <h1 id="main-title" style="margin:5px 0;">Welcome to pip49</h1>
    <p id="sub-text">ì„œë²„ ì—°ê²°ì„ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>

    <div class="gallery">
        <img src="https://pip49.github.io/intro/1.jpg" alt="Sample 1">
        <img src="https://pip49.github.io/intro/2.jpg" alt="Sample 2">
        <img src="https://pip49.github.io/intro/3.jpg" alt="Sample 3">
    </div>

    <div class="audio-player">
        <p>ğŸµ ìŒì•… ìƒ˜í”Œ ë¯¸ë¦¬ë“£ê¸°</p>
        <audio controls><source src="https://pip49.github.io/intro/1.mp3" type="audio/mpeg"></audio>
    </div>

    <div id="timer-area" class="timer-display">
        <span id="timer">05:00</span> í›„ ì„œë²„ë¡œ ë‹¤ì‹œ ì—°ê²°í•©ë‹ˆë‹¤.
    </div>

    <div class="off-info" style="font-size:0.85rem; color:#666; margin-top:15px;">
        ğŸ•’ <b>ìš´ì˜ ì‹œê°„:</b> 09:00 ~ 22:00
    </div>
    <button class="btn-retry" onclick="location.reload()">ì¦‰ì‹œ ì¬ì ‘ì†</button>
</div>

<script>
    const myServerIp = "http://125.251.58.88:49494/cgi-bin/D.cgi";
    // ì„œë²„ê°€ ì‚´ì•„ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì„œë²„ì˜ 'ì´ë¯¸ì§€'ë‚˜ 'íŒŒì¼' í•˜ë‚˜ë¥¼ ì§€ì •í•˜ì„¸ìš”. (CGI ì‘ë‹µë„ ê°€ëŠ¥)
    const checkUrl = myServerIp + "?check=1";

    const timerArea = document.getElementById('timer-area');
    const timerElement = document.getElementById('timer');
    const badge = document.getElementById('badge');
    const subText = document.getElementById('sub-text');

    // [í•µì‹¬] ì„œë²„ ì²´í¬ í•¨ìˆ˜
    function checkServer() {
        const img = new Image();

        // ì„œë²„ê°€ ì¼œì ¸ ìˆì–´ì„œ ì‘ë‹µì„ í•˜ë©´ (ì´ë¯¸ì§€ê°€ ì•„ë‹ˆë”ë¼ë„ ë°ì´í„°ê°€ ì˜¤ë©´ ì„±ê³µìœ¼ë¡œ ê°„ì£¼)
        img.onload = function() {
            badge.innerText = "ì„œë²„ ì˜¨ë¼ì¸ - ì´ë™ ì¤‘";
            badge.style.background = "#2ecc71";
            window.location.href = myServerIp;
        };

        // ì„œë²„ê°€ êº¼ì ¸ ìˆì–´ì„œ ì‘ë‹µì´ ì—†ìœ¼ë©´ (ì—ëŸ¬ ë°œìƒ ì‹œ)
        img.onerror = function() {
            startCountdown();
        };

        img.src = checkUrl + "&t=" + new Date().getTime(); // ìºì‹œ ë°©ì§€
    }

    function startCountdown() {
        badge.innerText = "ì„œë²„ ì˜¤í”„ë¼ì¸";
        badge.style.background = "#e74c3c";
        subText.innerText = "í˜„ì¬ ì„œë²„ê°€ ì ê²€ ì¤‘ì…ë‹ˆë‹¤. í™ë³´ ìë£Œë¥¼ ê°ìƒí•´ ë³´ì„¸ìš”.";
        timerArea.style.display = "block";

        let totalSeconds = 300;
        const countdown = setInterval(() => {
            totalSeconds--;
            let min = Math.floor(totalSeconds / 60);
            let sec = totalSeconds % 60;
            timerElement.innerText = `${String(min).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;

            if (totalSeconds <= 0) {
                clearInterval(countdown);
                window.location.href = myServerIp;
            }
        }, 1000);
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²´í¬ ì‹œì‘
    window.onload = checkServer;
</script>

</body>
</html>
