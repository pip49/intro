
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pip49 ê°œì¸ ì„œë²„ ì•ˆë‚´</title>
    <style>
        :root { --primary-color: #3498db; --bg-overlay: rgba(255, 255, 255, 0.9); }
        body {
            margin: 0; font-family: 'Pretendard', sans-serif;
            background: url('https://pip49.github.io/intro/bg.jpg') no-repeat center center fixed;
            background-size: cover; color: #333; display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }
        .main-card {
            background: var(--bg-overlay); width: 90%; max-width: 500px; padding: 30px;
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
        }
        .status-badge { background: #95a5a6; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; margin-bottom: 10px; display: inline-block; }
        .gallery { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0; }
        .gallery img { width: 100%; border-radius: 8px; transition: 0.3s; }
        .audio-player { background: #eee; padding: 15px; border-radius: 10px; margin-top: 15px; }
        audio { width: 100%; }
        .timer-display { color: #e74c3c; font-weight: bold; font-size: 1.2rem; margin: 15px 0; display: none; }
        .btn-retry { margin-top: 10px; padding: 12px 25px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="main-card">
    <span id="badge" class="status-badge">ì ‘ì† í™•ì¸ ì¤‘...</span>
    <h1 style="margin:5px 0;">Welcome to pip49</h1>
    <p id="info-text">ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

    <div class="gallery">
        <img src="https://pip49.github.io/intro/1.jpg" alt="1">
        <img src="https://pip49.github.io/intro/2.jpg" alt="2">
        <img src="https://pip49.github.io/intro/3.jpg" alt="3">
    </div>

    <div class="audio-player">
        <p>ğŸµ ìŒì•… ìƒ˜í”Œ ë¯¸ë¦¬ë“£ê¸°</p>
        <audio controls><source src="https://pip49.github.io/intro/1.mp3" type="audio/mpeg"></audio>
    </div>

    <div id="timer-area" class="timer-display">
        <span id="timer">05:00</span> í›„ ì„œë²„ë¡œ ìë™ ì´ë™í•©ë‹ˆë‹¤.
    </div>

    <div style="font-size:0.85rem; color:#666; margin-top:15px;">
        ğŸ•’ <b>ìš´ì˜ ì‹œê°„:</b> 09:00 ~ 22:00
    </div>
    <button class="btn-retry" onclick="location.reload()">ë‹¤ì‹œ í™•ì¸</button>
</div>

<script>
    // 1. ì‹¤ì œ ì ‘ì†í•  ì„œë²„ ì£¼ì†Œ
    const myServerIp = "http://125.251.58.88:49494/cgi-bin/D.cgi";

    // 2. [ì¤‘ìš”] ì„œë²„ì˜ 'ìƒì‚¬'ë¥¼ í™•ì¸í•  ì£¼ì†Œì…ë‹ˆë‹¤.
    // ì„œë²„ê°€ ì¼œì ¸ ìˆì„ ë•Œ í™•ì‹¤íˆ ì‘ë‹µì„ ì¤„ ìˆ˜ ìˆëŠ” ì£¼ì†Œ(CGI ì£¼ì†Œ ê·¸ëŒ€ë¡œ ì¨ë„ ë¬´ë°©)ë¥¼ ë„£ìŠµë‹ˆë‹¤.
    const checkUrl = myServerIp;

    const badge = document.getElementById('badge');
    const infoText = document.getElementById('info-text');
    const timerArea = document.getElementById('timer-area');
    const timerElement = document.getElementById('timer');

    // ì„œë²„ ì²´í¬ ë¡œì§
    const img = new Image();

    // ì„œë²„ê°€ ì‘ë‹µì„ í•˜ë©´ (ì¼œì ¸ ìˆìœ¼ë©´) ì¦‰ì‹œ ì´ë™
    img.onload = img.onerror = function(e) {
        // HTTP ì„œë²„ íŠ¹ì„±ìƒ ì´ë¯¸ì§€ê°€ ì•„ë‹ˆë”ë¼ë„ ì‘ë‹µ(ì—ëŸ¬ í¬í•¨)ì´ ì˜¤ë©´ ì„œë²„ê°€ ì¼œì§„ ê²ƒìœ¼ë¡œ ë´…ë‹ˆë‹¤.
        // ì™„ì „íˆ êº¼ì ¸ìˆì„ ë•Œ(ë„¤íŠ¸ì›Œí¬ ë¶ˆëŠ¥)ì™€ êµ¬ë³„í•˜ê¸° ìœ„í•´ 2ì´ˆ ì •ë„ë§Œ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
        badge.innerText = "ì„œë²„ ì˜¨ë¼ì¸";
        badge.style.background = "#2ecc71";
        infoText.innerText = "ì„œë²„ê°€ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë™í•©ë‹ˆë‹¤!";

        setTimeout(() => {
            window.location.href = myServerIp;
        }, 1000);
    };

    // ë§Œì•½ 3ì´ˆ ë™ì•ˆ ì•„ë¬´ëŸ° ì‘ë‹µì´ ì—†ìœ¼ë©´ ì„œë²„ê°€ êº¼ì§„ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  5ë¶„ ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
    const timeout = setTimeout(() => {
        img.onload = img.onerror = null; // ì´ë²¤íŠ¸ ì œê±°
        startCountdown();
    }, 3000);

    img.src = checkUrl + "?t=" + new Date().getTime();

    function startCountdown() {
        badge.innerText = "ì„œë²„ ì˜¤í”„ë¼ì¸";
        badge.style.background = "#e74c3c";
        infoText.innerText = "í˜„ì¬ ì„œë²„ ì ê²€ ì¤‘ì…ë‹ˆë‹¤. í™ë³´ ìë£Œë¥¼ ê°ìƒí•´ ë³´ì„¸ìš”.";
        timerArea.style.display = "block";

        let totalSeconds = 300;
        const countdown = setInterval(() => {
            totalSeconds--;
            let min = Math.floor(totalSeconds / 60);
            let sec = totalSeconds % 60;
            timerElement.innerText = `${String(min).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
            if (totalSeconds <= 0) {
                clearInterval(countdown);
                window.location.href = myServerIp;
            }
        }, 1000);
    }
</script>

</body>
</html>
